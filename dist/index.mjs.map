{"version":3,"file":"index.mjs","sources":["../hypertag.js"],"sourcesContent":["const attrPattern = /([\\w\\-_]+)\\s*(:?=\\s*((?:(['\"])(.*?)\\4)|[^\\s>]+))?/ms\n\nmodule.exports = parse\nObject.assign(module.exports, {\n  parse,\n  parseAttrs,\n  stripComments,\n  extend,\n})\n\nfunction extend(tags, options) {\n  options = {...options}\n  return source => parse(source, tags, options)\n}\n\nfunction parse(source, tags, options) {\n  tags = Array.isArray(tags) ? tags : [tags]\n  tags = tags.map(tag => tag === '*' ? '[^/\\\\s>]+' : tag)\n  options = {\n    tagKey: '<',\n    ...options,\n  }\n\n  const pattern = new RegExp(`<(?:${tags.join('|')})(?:\\\\s+(.*?))?>`, 'igms')\n  return (stripComments(source).match(pattern) || [])\n    .map(tag => parseAttrs(tag, options.tagKey))\n    .filter(x => x)\n}\n\nfunction parseAttrs(htmlTagText, tagKey = '<') {\n  const attrs = {}\n\n  const matchPattern = new RegExp(attrPattern, 'gims')\n  let match = matchPattern.exec(htmlTagText)\n  if (!match) {\n    return\n  }\n  attrs[tagKey] = match[1]\n\n  while ((match = matchPattern.exec(htmlTagText)) !== null) {\n    const key = match[1]\n    attrs[key]\n      = (match[5] !== null && match[5]) || (match[3] !== null && match[3]) || true\n  }\n  return attrs\n}\n\nfunction stripComments(html) {\n  // eslint-disable-next-line unicorn/better-regex\n  return html.replace(/<!--([\\s]|.)*?-->/gims, '')\n}\n"],"names":["attrPattern","parse","source","tags","options","Array","isArray","map","tag","tagKey","pattern","RegExp","join","stripComments","match","parseAttrs","filter","x","htmlTagText","attrs","matchPattern","exec","html","replace","module","exports","Object","assign","extend"],"mappings":"gNAAA,IAAMA,EAAc,0DAepB,SAASC,EAAMC,EAAQC,EAAMC,GAE3BD,GADAA,EAAOE,MAAMC,QAAQH,GAAQA,EAAO,CAACA,IACzBI,IAAI,SAAAC,SAAe,MAARA,EAAc,YAAcA,IACnDJ,KACEK,OAAQ,KACLL,GAGL,IAAMM,EAAU,IAAIC,cAAcR,EAAKS,KAAK,wBAAwB,QACpE,OAAQC,EAAcX,GAAQY,MAAMJ,IAAY,IAC7CH,IAAI,SAAAC,UAAOO,EAAWP,EAAKJ,EAAQK,UACnCO,OAAO,SAAAC,UAAKA,IAGjB,SAASF,EAAWG,EAAaT,YAAAA,IAAAA,EAAS,KACxC,IAAMU,EAAQ,GAERC,EAAe,IAAIT,OAAOX,EAAa,QACzCc,EAAQM,EAAaC,KAAKH,GAC9B,GAAKJ,EAAL,CAKA,IAFAK,EAAMV,GAAUK,EAAM,GAE8B,QAA5CA,EAAQM,EAAaC,KAAKH,KAEhCC,EADYL,EAAM,IAEA,OAAbA,EAAM,IAAeA,EAAM,IAAqB,OAAbA,EAAM,IAAeA,EAAM,KAAO,EAE5E,OAAOK,GAGT,SAASN,EAAcS,GAErB,OAAOA,EAAKC,QAAQ,wCAAyB,IA/C/CC,OAAOC,QAAUxB,EACjByB,OAAOC,OAAOH,OAAOC,QAAS,CAC5BxB,MAAAA,EACAc,WAAAA,EACAF,cAAAA,EACAe,OAGF,SAAgBzB,EAAMC,GAEpB,OADAA,OAAcA,YACPF,UAAUD,EAAMC,EAAQC,EAAMC"}