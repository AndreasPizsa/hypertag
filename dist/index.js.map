{"version":3,"file":"index.js","sources":["../hypertag.js"],"sourcesContent":["const attrPattern = /([\\w\\-_]+)\\s*(:?=\\s*((?:(['\"])(.*?)\\4)|(?:[^\\s>]+)))?/ms\n\nmodule.exports = parse\nObject.assign(module.exports, {\n  parse,\n  parseAttrs,\n  stripComments,\n  extend\n})\n\nfunction extend(tags, options) {\n  options = {...options}\n  return source => parse(source, tags, options)\n}\n\nfunction parse(source, tags, options) {\n  tags = Array.isArray(tags) ? tags : [tags]\n  tags = tags.map(tag => tag === '*' ? '[^/\\\\s>]+' : tag)\n  options = {\n    tagKey: '<',\n    ...options\n  }\n\n  const pattern = new RegExp(`<(?:${tags.join('|')})(?:\\\\s+(.*?))?>`, 'igms')\n  return (stripComments(source).match(pattern) || [])\n    .map(tag => parseAttrs(tag, options.tagKey))\n    .filter(x => x)\n}\n\nfunction parseAttrs(htmlTagText, tagKey = '<') {\n  const attrs = {}\n\n  const matchPattern = new RegExp(attrPattern, 'gims')\n  let match = matchPattern.exec(htmlTagText)\n  if (!match) {\n    return\n  }\n  attrs[tagKey] = match[1]\n\n  while ((match = matchPattern.exec(htmlTagText)) !== null) {\n    const key = match[1]\n    attrs[key]\n      = (match[5] !== null && match[5]) || (match[3] !== null && match[3]) || true\n  }\n  return attrs\n}\n\nfunction stripComments(html) {\n  return html.replace(/<!--(?:[\\s]|.)*?-->/gims, '')\n}\n"],"names":["const","attrPattern","parse","source","tags","options","Array","isArray","map","tag","Object","tagKey","pattern","RegExp","join","stripComments","match","parseAttrs","filter","x","htmlTagText","attrs","matchPattern","exec","html","replace","module","exports","assign"],"mappings":"AAAAA,IAAMC,EAAc,0DAepB,SAASC,EAAMC,EAAQC,EAAMC,GAE3BD,GADAA,EAAOE,MAAMC,QAAQH,GAAQA,EAAO,CAACA,IACzBI,aAAIC,SAAe,MAARA,EAAc,YAAcA,IACnDJ,EAAUK,kBACRC,OAAQ,YAIJC,EAAU,IAAIC,cAAcT,EAAKU,KAAK,wBAAwB,eAC5DC,EAAcZ,GAAQa,MAAMJ,IAAY,IAC7CJ,aAAIC,UAAOQ,EAAWR,EAAKJ,EAAQM,UACnCO,gBAAOC,UAAKA,IAGjB,SAASF,EAAWG,EAAaT,kBAAS,SAClCU,EAAQ,GAERC,EAAe,IAAIT,OAAOZ,EAAa,QACzCe,EAAQM,EAAaC,KAAKH,MACzBJ,OAGLK,EAAMV,GAAUK,EAAM,GAE8B,QAA5CA,EAAQM,EAAaC,KAAKH,KAEhCC,EADYL,EAAM,IAEA,OAAbA,EAAM,IAAeA,EAAM,IAAqB,OAAbA,EAAM,IAAeA,EAAM,KAAO,SAErEK,GAGT,SAASN,EAAcS,UACdA,EAAKC,QAAQ,0BAA2B,IA9CjDC,OAAOC,QAAUzB,EACjBQ,OAAOkB,OAAOF,OAAOC,QAAS,OAC5BzB,aACAe,gBACAF,SAIF,SAAgBX,EAAMC,UACpBA,EAAUK,iBAAIL,YACPF,UAAUD,EAAMC,EAAQC,EAAMC"}